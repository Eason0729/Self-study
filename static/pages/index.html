<!DOCTYPE html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>single page web application</title>
  <link href="/css/index.css" rel="stylesheet" type="text/css" />
  <!--import dependence-->
  <!--api-->
  <script src="/js/socket.io.min.js"></script>
  <script src="/js/api.js"></script>
  <!--bootstrap-->
  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
    integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
    crossorigin="anonymous"
  ></script>
</head>

<body
  background="https://www.sucaimohe.com/uploads/allimg/200614/52-200614105J4529.jpg"
>
  <center>
    <h1>歡迎來到留言板</h1>
  </center>
  <div class="container-fluid">
    <form id="login-event" onsubmit="return loginE()">
      <div class="mb-3">
        <label for="Account1" class="form-label">Account</label>
        <input
          type="text"
          class="form-control"
          id="Account1"
          aria-describedby="Account"
        />
      </div>
      <div class="mb-3">
        <label for="Password1" class="form-label">Password</label>
        <input type="password" class="form-control" id="Password1" />
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
  </div>
  <script defer>
    HC.init().then(() => {
      console.log("inited");
    });
    function loginE() {
      console.log("loging in");
      const account = document.querySelector("input#Account1").value;
      const password = document.querySelector("input#Password1").value;
      HC.user.login(account, password).then((e) => {
        console.log("recived");
        if (HC.user.Access || -1 > -1) {
          HC.user
            .storeConnection()
            .then(() => (window.location.href = "message.html"));
        } else alert("wrong password");
      });
      return false;
    }
  </script>
</body>
